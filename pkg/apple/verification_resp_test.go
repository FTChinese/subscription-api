package apple

import (
	"encoding/json"
	"sort"
	"testing"
)

const mockReceiptResponse = `
{
  "status": 0,
  "environment": "Sandbox",
  "receipt": {
    "receipt_type": "ProductionSandbox",
    "adam_id": 0,
    "app_item_id": 0,
    "bundle_id": "com.ft.ftchinese.mobile",
    "application_version": "1",
    "download_id": 0,
    "version_external_identifier": 0,
    "receipt_creation_date": "2019-11-22 07:26:56 Etc/GMT",
    "receipt_creation_date_ms": "1574407616000",
    "receipt_creation_date_pst": "2019-11-21 23:26:56 America/Los_Angeles",
    "request_date": "2019-11-26 01:26:27 Etc/GMT",
    "request_date_ms": "1574731587005",
    "request_date_pst": "2019-11-25 17:26:27 America/Los_Angeles",
    "original_purchase_date": "2013-08-01 07:00:00 Etc/GMT",
    "original_purchase_date_ms": "1375340400000",
    "original_purchase_date_pst": "2013-08-01 00:00:00 America/Los_Angeles",
    "original_application_version": "1.0",
    "in_app": [
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.vip",
        "transaction_id": "1000000421745601",
        "original_transaction_id": "1000000421745601",
        "purchase_date": "2018-07-24 07:42:17 Etc/GMT",
        "purchase_date_ms": "1532418137000",
        "purchase_date_pst": "2018-07-24 00:42:17 America/Los_Angeles",
        "original_purchase_date": "2018-07-24 07:42:18 Etc/GMT",
        "original_purchase_date_ms": "1532418138000",
        "original_purchase_date_pst": "2018-07-24 00:42:18 America/Los_Angeles",
        "expires_date": "2018-07-24 08:42:17 Etc/GMT",
        "expires_date_ms": "1532421737000",
        "expires_date_pst": "2018-07-24 01:42:17 America/Los_Angeles",
        "web_order_line_item_id": "1000000039619838",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.vip",
        "transaction_id": "1000000421775025",
        "original_transaction_id": "1000000421775025",
        "purchase_date": "2018-07-24 08:42:17 Etc/GMT",
        "purchase_date_ms": "1532421737000",
        "purchase_date_pst": "2018-07-24 01:42:17 America/Los_Angeles",
        "original_purchase_date": "2018-07-24 08:41:24 Etc/GMT",
        "original_purchase_date_ms": "1532421684000",
        "original_purchase_date_pst": "2018-07-24 01:41:24 America/Los_Angeles",
        "expires_date": "2018-07-24 09:42:17 Etc/GMT",
        "expires_date_ms": "1532425337000",
        "expires_date_pst": "2018-07-24 02:42:17 America/Los_Angeles",
        "web_order_line_item_id": "1000000039619856",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.vip",
        "transaction_id": "1000000421820745",
        "original_transaction_id": "1000000421820745",
        "purchase_date": "2018-07-24 09:42:34 Etc/GMT",
        "purchase_date_ms": "1532425354000",
        "purchase_date_pst": "2018-07-24 02:42:34 America/Los_Angeles",
        "original_purchase_date": "2018-07-24 09:42:35 Etc/GMT",
        "original_purchase_date_ms": "1532425355000",
        "original_purchase_date_pst": "2018-07-24 02:42:35 America/Los_Angeles",
        "expires_date": "2018-07-24 10:42:34 Etc/GMT",
        "expires_date_ms": "1532428954000",
        "expires_date_pst": "2018-07-24 03:42:34 America/Los_Angeles",
        "web_order_line_item_id": "1000000039620932",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.vip",
        "transaction_id": "1000000421868618",
        "original_transaction_id": "1000000421868618",
        "purchase_date": "2018-07-24 10:42:34 Etc/GMT",
        "purchase_date_ms": "1532428954000",
        "purchase_date_pst": "2018-07-24 03:42:34 America/Los_Angeles",
        "original_purchase_date": "2018-07-24 10:42:30 Etc/GMT",
        "original_purchase_date_ms": "1532428950000",
        "original_purchase_date_pst": "2018-07-24 03:42:30 America/Los_Angeles",
        "expires_date": "2018-07-24 11:42:34 Etc/GMT",
        "expires_date_ms": "1532432554000",
        "expires_date_pst": "2018-07-24 04:42:34 America/Los_Angeles",
        "web_order_line_item_id": "1000000039622083",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.vip",
        "transaction_id": "1000000421901533",
        "original_transaction_id": "1000000421901533",
        "purchase_date": "2018-07-24 11:42:34 Etc/GMT",
        "purchase_date_ms": "1532432554000",
        "purchase_date_pst": "2018-07-24 04:42:34 America/Los_Angeles",
        "original_purchase_date": "2018-07-24 11:41:48 Etc/GMT",
        "original_purchase_date_ms": "1532432508000",
        "original_purchase_date_pst": "2018-07-24 04:41:48 America/Los_Angeles",
        "expires_date": "2018-07-24 12:42:34 Etc/GMT",
        "expires_date_ms": "1532436154000",
        "expires_date_pst": "2018-07-24 05:42:34 America/Los_Angeles",
        "web_order_line_item_id": "1000000039623415",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.vip",
        "transaction_id": "1000000423345801",
        "original_transaction_id": "1000000423345801",
        "purchase_date": "2018-07-27 05:39:44 Etc/GMT",
        "purchase_date_ms": "1532669984000",
        "purchase_date_pst": "2018-07-26 22:39:44 America/Los_Angeles",
        "original_purchase_date": "2018-07-27 05:39:46 Etc/GMT",
        "original_purchase_date_ms": "1532669986000",
        "original_purchase_date_pst": "2018-07-26 22:39:46 America/Los_Angeles",
        "expires_date": "2018-07-27 06:39:44 Etc/GMT",
        "expires_date_ms": "1532673584000",
        "expires_date_pst": "2018-07-26 23:39:44 America/Los_Angeles",
        "web_order_line_item_id": "1000000039670911",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.vip",
        "transaction_id": "1000000423370716",
        "original_transaction_id": "1000000423370716",
        "purchase_date": "2018-07-27 07:00:39 Etc/GMT",
        "purchase_date_ms": "1532674839000",
        "purchase_date_pst": "2018-07-27 00:00:39 America/Los_Angeles",
        "original_purchase_date": "2018-07-27 07:00:40 Etc/GMT",
        "original_purchase_date_ms": "1532674840000",
        "original_purchase_date_pst": "2018-07-27 00:00:40 America/Los_Angeles",
        "expires_date": "2018-07-27 08:00:39 Etc/GMT",
        "expires_date_ms": "1532678439000",
        "expires_date_pst": "2018-07-27 01:00:39 America/Los_Angeles",
        "web_order_line_item_id": "1000000039672196",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000421745197",
        "original_transaction_id": "1000000421745197",
        "purchase_date": "2018-07-24 07:41:11 Etc/GMT",
        "purchase_date_ms": "1532418071000",
        "purchase_date_pst": "2018-07-24 00:41:11 America/Los_Angeles",
        "original_purchase_date": "2018-07-24 07:41:12 Etc/GMT",
        "original_purchase_date_ms": "1532418072000",
        "original_purchase_date_pst": "2018-07-24 00:41:12 America/Los_Angeles",
        "expires_date": "2018-07-24 08:41:11 Etc/GMT",
        "expires_date_ms": "1532421671000",
        "expires_date_pst": "2018-07-24 01:41:11 America/Los_Angeles",
        "web_order_line_item_id": "1000000037329063",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000422368085",
        "original_transaction_id": "1000000422368085",
        "purchase_date": "2018-07-25 08:05:47 Etc/GMT",
        "purchase_date_ms": "1532505947000",
        "purchase_date_pst": "2018-07-25 01:05:47 America/Los_Angeles",
        "original_purchase_date": "2018-07-25 08:05:49 Etc/GMT",
        "original_purchase_date_ms": "1532505949000",
        "original_purchase_date_pst": "2018-07-25 01:05:49 America/Los_Angeles",
        "expires_date": "2018-07-25 09:05:47 Etc/GMT",
        "expires_date_ms": "1532509547000",
        "expires_date_pst": "2018-07-25 02:05:47 America/Los_Angeles",
        "web_order_line_item_id": "1000000039624347",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000422408431",
        "original_transaction_id": "1000000422408431",
        "purchase_date": "2018-07-25 09:05:47 Etc/GMT",
        "purchase_date_ms": "1532509547000",
        "purchase_date_pst": "2018-07-25 02:05:47 America/Los_Angeles",
        "original_purchase_date": "2018-07-25 09:04:49 Etc/GMT",
        "original_purchase_date_ms": "1532509489000",
        "original_purchase_date_pst": "2018-07-25 02:04:49 America/Los_Angeles",
        "expires_date": "2018-07-25 10:05:47 Etc/GMT",
        "expires_date_ms": "1532513147000",
        "expires_date_pst": "2018-07-25 03:05:47 America/Los_Angeles",
        "web_order_line_item_id": "1000000039637015",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000422457079",
        "original_transaction_id": "1000000422457079",
        "purchase_date": "2018-07-25 10:05:47 Etc/GMT",
        "purchase_date_ms": "1532513147000",
        "purchase_date_pst": "2018-07-25 03:05:47 America/Los_Angeles",
        "original_purchase_date": "2018-07-25 10:04:52 Etc/GMT",
        "original_purchase_date_ms": "1532513092000",
        "original_purchase_date_pst": "2018-07-25 03:04:52 America/Los_Angeles",
        "expires_date": "2018-07-25 11:05:47 Etc/GMT",
        "expires_date_ms": "1532516747000",
        "expires_date_pst": "2018-07-25 04:05:47 America/Los_Angeles",
        "web_order_line_item_id": "1000000039638152",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000422494912",
        "original_transaction_id": "1000000422494912",
        "purchase_date": "2018-07-25 11:05:47 Etc/GMT",
        "purchase_date_ms": "1532516747000",
        "purchase_date_pst": "2018-07-25 04:05:47 America/Los_Angeles",
        "original_purchase_date": "2018-07-25 11:04:51 Etc/GMT",
        "original_purchase_date_ms": "1532516691000",
        "original_purchase_date_pst": "2018-07-25 04:04:51 America/Los_Angeles",
        "expires_date": "2018-07-25 12:05:47 Etc/GMT",
        "expires_date_ms": "1532520347000",
        "expires_date_pst": "2018-07-25 05:05:47 America/Los_Angeles",
        "web_order_line_item_id": "1000000039639391",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000422529189",
        "original_transaction_id": "1000000422529189",
        "purchase_date": "2018-07-25 12:05:47 Etc/GMT",
        "purchase_date_ms": "1532520347000",
        "purchase_date_pst": "2018-07-25 05:05:47 America/Los_Angeles",
        "original_purchase_date": "2018-07-25 12:04:51 Etc/GMT",
        "original_purchase_date_ms": "1532520291000",
        "original_purchase_date_pst": "2018-07-25 05:04:51 America/Los_Angeles",
        "expires_date": "2018-07-25 13:05:47 Etc/GMT",
        "expires_date_ms": "1532523947000",
        "expires_date_pst": "2018-07-25 06:05:47 America/Los_Angeles",
        "web_order_line_item_id": "1000000039640467",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000422569561",
        "original_transaction_id": "1000000422569561",
        "purchase_date": "2018-07-25 13:05:47 Etc/GMT",
        "purchase_date_ms": "1532523947000",
        "purchase_date_pst": "2018-07-25 06:05:47 America/Los_Angeles",
        "original_purchase_date": "2018-07-25 13:05:01 Etc/GMT",
        "original_purchase_date_ms": "1532523901000",
        "original_purchase_date_pst": "2018-07-25 06:05:01 America/Los_Angeles",
        "expires_date": "2018-07-25 14:05:47 Etc/GMT",
        "expires_date_ms": "1532527547000",
        "expires_date_pst": "2018-07-25 07:05:47 America/Los_Angeles",
        "web_order_line_item_id": "1000000039641613",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000423261830",
        "original_transaction_id": "1000000423261830",
        "purchase_date": "2018-07-27 00:46:25 Etc/GMT",
        "purchase_date_ms": "1532652385000",
        "purchase_date_pst": "2018-07-26 17:46:25 America/Los_Angeles",
        "original_purchase_date": "2018-07-27 00:46:26 Etc/GMT",
        "original_purchase_date_ms": "1532652386000",
        "original_purchase_date_pst": "2018-07-26 17:46:26 America/Los_Angeles",
        "expires_date": "2018-07-27 01:46:25 Etc/GMT",
        "expires_date_ms": "1532655985000",
        "expires_date_pst": "2018-07-26 18:46:25 America/Los_Angeles",
        "web_order_line_item_id": "1000000039642764",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000423269876",
        "original_transaction_id": "1000000423269876",
        "purchase_date": "2018-07-27 01:46:25 Etc/GMT",
        "purchase_date_ms": "1532655985000",
        "purchase_date_pst": "2018-07-26 18:46:25 America/Los_Angeles",
        "original_purchase_date": "2018-07-27 01:45:29 Etc/GMT",
        "original_purchase_date_ms": "1532655929000",
        "original_purchase_date_pst": "2018-07-26 18:45:29 America/Los_Angeles",
        "expires_date": "2018-07-27 02:46:25 Etc/GMT",
        "expires_date_ms": "1532659585000",
        "expires_date_pst": "2018-07-26 19:46:25 America/Los_Angeles",
        "web_order_line_item_id": "1000000039669246",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000423286456",
        "original_transaction_id": "1000000423286456",
        "purchase_date": "2018-07-27 02:46:25 Etc/GMT",
        "purchase_date_ms": "1532659585000",
        "purchase_date_pst": "2018-07-26 19:46:25 America/Los_Angeles",
        "original_purchase_date": "2018-07-27 02:45:35 Etc/GMT",
        "original_purchase_date_ms": "1532659535000",
        "original_purchase_date_pst": "2018-07-26 19:45:35 America/Los_Angeles",
        "expires_date": "2018-07-27 03:46:25 Etc/GMT",
        "expires_date_ms": "1532663185000",
        "expires_date_pst": "2018-07-26 20:46:25 America/Los_Angeles",
        "web_order_line_item_id": "1000000039669562",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000423304465",
        "original_transaction_id": "1000000423304465",
        "purchase_date": "2018-07-27 03:46:25 Etc/GMT",
        "purchase_date_ms": "1532663185000",
        "purchase_date_pst": "2018-07-26 20:46:25 America/Los_Angeles",
        "original_purchase_date": "2018-07-27 03:45:27 Etc/GMT",
        "original_purchase_date_ms": "1532663127000",
        "original_purchase_date_pst": "2018-07-26 20:45:27 America/Los_Angeles",
        "expires_date": "2018-07-27 04:46:25 Etc/GMT",
        "expires_date_ms": "1532666785000",
        "expires_date_pst": "2018-07-26 21:46:25 America/Los_Angeles",
        "web_order_line_item_id": "1000000039669996",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000423325875",
        "original_transaction_id": "1000000423325875",
        "purchase_date": "2018-07-27 04:46:25 Etc/GMT",
        "purchase_date_ms": "1532666785000",
        "purchase_date_pst": "2018-07-26 21:46:25 America/Los_Angeles",
        "original_purchase_date": "2018-07-27 04:45:30 Etc/GMT",
        "original_purchase_date_ms": "1532666730000",
        "original_purchase_date_pst": "2018-07-26 21:45:30 America/Los_Angeles",
        "expires_date": "2018-07-27 05:46:25 Etc/GMT",
        "expires_date_ms": "1532670385000",
        "expires_date_pst": "2018-07-26 22:46:25 America/Los_Angeles",
        "web_order_line_item_id": "1000000039670444",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000423370426",
        "original_transaction_id": "1000000423370426",
        "purchase_date": "2018-07-27 06:59:17 Etc/GMT",
        "purchase_date_ms": "1532674757000",
        "purchase_date_pst": "2018-07-26 23:59:17 America/Los_Angeles",
        "original_purchase_date": "2018-07-27 06:59:18 Etc/GMT",
        "original_purchase_date_ms": "1532674758000",
        "original_purchase_date_pst": "2018-07-26 23:59:18 America/Los_Angeles",
        "expires_date": "2018-07-27 07:59:17 Etc/GMT",
        "expires_date_ms": "1532678357000",
        "expires_date_pst": "2018-07-27 00:59:17 America/Los_Angeles",
        "web_order_line_item_id": "1000000039671249",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member",
        "transaction_id": "1000000423430088",
        "original_transaction_id": "1000000423430088",
        "purchase_date": "2018-07-27 08:33:01 Etc/GMT",
        "purchase_date_ms": "1532680381000",
        "purchase_date_pst": "2018-07-27 01:33:01 America/Los_Angeles",
        "original_purchase_date": "2018-07-27 08:33:02 Etc/GMT",
        "original_purchase_date_ms": "1532680382000",
        "original_purchase_date_pst": "2018-07-27 01:33:02 America/Los_Angeles",
        "expires_date": "2018-07-27 09:33:01 Etc/GMT",
        "expires_date_ms": "1532683981000",
        "expires_date_pst": "2018-07-27 02:33:01 America/Los_Angeles",
        "web_order_line_item_id": "1000000039672220",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
        "transaction_id": "1000000595911566",
        "original_transaction_id": "1000000595911566",
        "purchase_date": "2019-11-22 07:01:55 Etc/GMT",
        "purchase_date_ms": "1574406115000",
        "purchase_date_pst": "2019-11-21 23:01:55 America/Los_Angeles",
        "original_purchase_date": "2019-11-22 07:01:56 Etc/GMT",
        "original_purchase_date_ms": "1574406116000",
        "original_purchase_date_pst": "2019-11-21 23:01:56 America/Los_Angeles",
        "expires_date": "2019-11-22 07:06:55 Etc/GMT",
        "expires_date_ms": "1574406415000",
        "expires_date_pst": "2019-11-21 23:06:55 America/Los_Angeles",
        "web_order_line_item_id": "1000000039673774",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
        "transaction_id": "1000000595914852",
        "original_transaction_id": "1000000595914852",
        "purchase_date": "2019-11-22 07:06:55 Etc/GMT",
        "purchase_date_ms": "1574406415000",
        "purchase_date_pst": "2019-11-21 23:06:55 America/Los_Angeles",
        "original_purchase_date": "2019-11-22 07:06:21 Etc/GMT",
        "original_purchase_date_ms": "1574406381000",
        "original_purchase_date_pst": "2019-11-21 23:06:21 America/Los_Angeles",
        "expires_date": "2019-11-22 07:11:55 Etc/GMT",
        "expires_date_ms": "1574406715000",
        "expires_date_pst": "2019-11-21 23:11:55 America/Los_Angeles",
        "web_order_line_item_id": "1000000048450343",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
        "transaction_id": "1000000595917594",
        "original_transaction_id": "1000000595917594",
        "purchase_date": "2019-11-22 07:11:55 Etc/GMT",
        "purchase_date_ms": "1574406715000",
        "purchase_date_pst": "2019-11-21 23:11:55 America/Los_Angeles",
        "original_purchase_date": "2019-11-22 07:11:26 Etc/GMT",
        "original_purchase_date_ms": "1574406686000",
        "original_purchase_date_pst": "2019-11-21 23:11:26 America/Los_Angeles",
        "expires_date": "2019-11-22 07:16:55 Etc/GMT",
        "expires_date_ms": "1574407015000",
        "expires_date_pst": "2019-11-21 23:16:55 America/Los_Angeles",
        "web_order_line_item_id": "1000000048450495",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
        "transaction_id": "1000000595920159",
        "original_transaction_id": "1000000595920159",
        "purchase_date": "2019-11-22 07:16:55 Etc/GMT",
        "purchase_date_ms": "1574407015000",
        "purchase_date_pst": "2019-11-21 23:16:55 America/Los_Angeles",
        "original_purchase_date": "2019-11-22 07:15:56 Etc/GMT",
        "original_purchase_date_ms": "1574406956000",
        "original_purchase_date_pst": "2019-11-21 23:15:56 America/Los_Angeles",
        "expires_date": "2019-11-22 07:21:55 Etc/GMT",
        "expires_date_ms": "1574407315000",
        "expires_date_pst": "2019-11-21 23:21:55 America/Los_Angeles",
        "web_order_line_item_id": "1000000048450647",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
        "transaction_id": "1000000595923656",
        "original_transaction_id": "1000000595923656",
        "purchase_date": "2019-11-22 07:21:55 Etc/GMT",
        "purchase_date_ms": "1574407315000",
        "purchase_date_pst": "2019-11-21 23:21:55 America/Los_Angeles",
        "original_purchase_date": "2019-11-22 07:21:13 Etc/GMT",
        "original_purchase_date_ms": "1574407273000",
        "original_purchase_date_pst": "2019-11-21 23:21:13 America/Los_Angeles",
        "expires_date": "2019-11-22 07:26:55 Etc/GMT",
        "expires_date_ms": "1574407615000",
        "expires_date_pst": "2019-11-21 23:26:55 America/Los_Angeles",
        "web_order_line_item_id": "1000000048450768",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      },
      {
        "quantity": "1",
        "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
        "transaction_id": "1000000595926312",
        "original_transaction_id": "1000000595926312",
        "purchase_date": "2019-11-22 07:26:55 Etc/GMT",
        "purchase_date_ms": "1574407615000",
        "purchase_date_pst": "2019-11-21 23:26:55 America/Los_Angeles",
        "original_purchase_date": "2019-11-22 07:26:07 Etc/GMT",
        "original_purchase_date_ms": "1574407567000",
        "original_purchase_date_pst": "2019-11-21 23:26:07 America/Los_Angeles",
        "expires_date": "2019-11-22 07:31:55 Etc/GMT",
        "expires_date_ms": "1574407915000",
        "expires_date_pst": "2019-11-21 23:31:55 America/Los_Angeles",
        "web_order_line_item_id": "1000000048450931",
        "is_trial_period": "false",
        "is_in_intro_offer_period": "false"
      }
    ]
  },
  "latest_receipt_info": [
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000421745197",
      "original_transaction_id": "1000000421745197",
      "purchase_date": "2018-07-24 07:41:11 Etc/GMT",
      "purchase_date_ms": "1532418071000",
      "purchase_date_pst": "2018-07-24 00:41:11 America/Los_Angeles",
      "original_purchase_date": "2018-07-24 07:41:12 Etc/GMT",
      "original_purchase_date_ms": "1532418072000",
      "original_purchase_date_pst": "2018-07-24 00:41:12 America/Los_Angeles",
      "expires_date": "2018-07-24 08:41:11 Etc/GMT",
      "expires_date_ms": "1532421671000",
      "expires_date_pst": "2018-07-24 01:41:11 America/Los_Angeles",
      "web_order_line_item_id": "1000000037329063",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285",
      "is_upgraded": "true"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.vip",
      "transaction_id": "1000000421745601",
      "original_transaction_id": "1000000421745601",
      "purchase_date": "2018-07-24 07:42:17 Etc/GMT",
      "purchase_date_ms": "1532418137000",
      "purchase_date_pst": "2018-07-24 00:42:17 America/Los_Angeles",
      "original_purchase_date": "2018-07-24 07:42:18 Etc/GMT",
      "original_purchase_date_ms": "1532418138000",
      "original_purchase_date_pst": "2018-07-24 00:42:18 America/Los_Angeles",
      "expires_date": "2018-07-24 08:42:17 Etc/GMT",
      "expires_date_ms": "1532421737000",
      "expires_date_pst": "2018-07-24 01:42:17 America/Los_Angeles",
      "web_order_line_item_id": "1000000039619838",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.vip",
      "transaction_id": "1000000421775025",
      "original_transaction_id": "1000000421775025",
      "purchase_date": "2018-07-24 08:42:17 Etc/GMT",
      "purchase_date_ms": "1532421737000",
      "purchase_date_pst": "2018-07-24 01:42:17 America/Los_Angeles",
      "original_purchase_date": "2018-07-24 08:41:24 Etc/GMT",
      "original_purchase_date_ms": "1532421684000",
      "original_purchase_date_pst": "2018-07-24 01:41:24 America/Los_Angeles",
      "expires_date": "2018-07-24 09:42:17 Etc/GMT",
      "expires_date_ms": "1532425337000",
      "expires_date_pst": "2018-07-24 02:42:17 America/Los_Angeles",
      "web_order_line_item_id": "1000000039619856",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.vip",
      "transaction_id": "1000000421820745",
      "original_transaction_id": "1000000421820745",
      "purchase_date": "2018-07-24 09:42:34 Etc/GMT",
      "purchase_date_ms": "1532425354000",
      "purchase_date_pst": "2018-07-24 02:42:34 America/Los_Angeles",
      "original_purchase_date": "2018-07-24 09:42:35 Etc/GMT",
      "original_purchase_date_ms": "1532425355000",
      "original_purchase_date_pst": "2018-07-24 02:42:35 America/Los_Angeles",
      "expires_date": "2018-07-24 10:42:34 Etc/GMT",
      "expires_date_ms": "1532428954000",
      "expires_date_pst": "2018-07-24 03:42:34 America/Los_Angeles",
      "web_order_line_item_id": "1000000039620932",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.vip",
      "transaction_id": "1000000421868618",
      "original_transaction_id": "1000000421868618",
      "purchase_date": "2018-07-24 10:42:34 Etc/GMT",
      "purchase_date_ms": "1532428954000",
      "purchase_date_pst": "2018-07-24 03:42:34 America/Los_Angeles",
      "original_purchase_date": "2018-07-24 10:42:30 Etc/GMT",
      "original_purchase_date_ms": "1532428950000",
      "original_purchase_date_pst": "2018-07-24 03:42:30 America/Los_Angeles",
      "expires_date": "2018-07-24 11:42:34 Etc/GMT",
      "expires_date_ms": "1532432554000",
      "expires_date_pst": "2018-07-24 04:42:34 America/Los_Angeles",
      "web_order_line_item_id": "1000000039622083",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.vip",
      "transaction_id": "1000000421901533",
      "original_transaction_id": "1000000421901533",
      "purchase_date": "2018-07-24 11:42:34 Etc/GMT",
      "purchase_date_ms": "1532432554000",
      "purchase_date_pst": "2018-07-24 04:42:34 America/Los_Angeles",
      "original_purchase_date": "2018-07-24 11:41:48 Etc/GMT",
      "original_purchase_date_ms": "1532432508000",
      "original_purchase_date_pst": "2018-07-24 04:41:48 America/Los_Angeles",
      "expires_date": "2018-07-24 12:42:34 Etc/GMT",
      "expires_date_ms": "1532436154000",
      "expires_date_pst": "2018-07-24 05:42:34 America/Los_Angeles",
      "web_order_line_item_id": "1000000039623415",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000422368085",
      "original_transaction_id": "1000000422368085",
      "purchase_date": "2018-07-25 08:05:47 Etc/GMT",
      "purchase_date_ms": "1532505947000",
      "purchase_date_pst": "2018-07-25 01:05:47 America/Los_Angeles",
      "original_purchase_date": "2018-07-25 08:05:49 Etc/GMT",
      "original_purchase_date_ms": "1532505949000",
      "original_purchase_date_pst": "2018-07-25 01:05:49 America/Los_Angeles",
      "expires_date": "2018-07-25 09:05:47 Etc/GMT",
      "expires_date_ms": "1532509547000",
      "expires_date_pst": "2018-07-25 02:05:47 America/Los_Angeles",
      "web_order_line_item_id": "1000000039624347",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000422408431",
      "original_transaction_id": "1000000422408431",
      "purchase_date": "2018-07-25 09:05:47 Etc/GMT",
      "purchase_date_ms": "1532509547000",
      "purchase_date_pst": "2018-07-25 02:05:47 America/Los_Angeles",
      "original_purchase_date": "2018-07-25 09:04:49 Etc/GMT",
      "original_purchase_date_ms": "1532509489000",
      "original_purchase_date_pst": "2018-07-25 02:04:49 America/Los_Angeles",
      "expires_date": "2018-07-25 10:05:47 Etc/GMT",
      "expires_date_ms": "1532513147000",
      "expires_date_pst": "2018-07-25 03:05:47 America/Los_Angeles",
      "web_order_line_item_id": "1000000039637015",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000422457079",
      "original_transaction_id": "1000000422457079",
      "purchase_date": "2018-07-25 10:05:47 Etc/GMT",
      "purchase_date_ms": "1532513147000",
      "purchase_date_pst": "2018-07-25 03:05:47 America/Los_Angeles",
      "original_purchase_date": "2018-07-25 10:04:52 Etc/GMT",
      "original_purchase_date_ms": "1532513092000",
      "original_purchase_date_pst": "2018-07-25 03:04:52 America/Los_Angeles",
      "expires_date": "2018-07-25 11:05:47 Etc/GMT",
      "expires_date_ms": "1532516747000",
      "expires_date_pst": "2018-07-25 04:05:47 America/Los_Angeles",
      "web_order_line_item_id": "1000000039638152",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000422494912",
      "original_transaction_id": "1000000422494912",
      "purchase_date": "2018-07-25 11:05:47 Etc/GMT",
      "purchase_date_ms": "1532516747000",
      "purchase_date_pst": "2018-07-25 04:05:47 America/Los_Angeles",
      "original_purchase_date": "2018-07-25 11:04:51 Etc/GMT",
      "original_purchase_date_ms": "1532516691000",
      "original_purchase_date_pst": "2018-07-25 04:04:51 America/Los_Angeles",
      "expires_date": "2018-07-25 12:05:47 Etc/GMT",
      "expires_date_ms": "1532520347000",
      "expires_date_pst": "2018-07-25 05:05:47 America/Los_Angeles",
      "web_order_line_item_id": "1000000039639391",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000422529189",
      "original_transaction_id": "1000000422529189",
      "purchase_date": "2018-07-25 12:05:47 Etc/GMT",
      "purchase_date_ms": "1532520347000",
      "purchase_date_pst": "2018-07-25 05:05:47 America/Los_Angeles",
      "original_purchase_date": "2018-07-25 12:04:51 Etc/GMT",
      "original_purchase_date_ms": "1532520291000",
      "original_purchase_date_pst": "2018-07-25 05:04:51 America/Los_Angeles",
      "expires_date": "2018-07-25 13:05:47 Etc/GMT",
      "expires_date_ms": "1532523947000",
      "expires_date_pst": "2018-07-25 06:05:47 America/Los_Angeles",
      "web_order_line_item_id": "1000000039640467",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000422569561",
      "original_transaction_id": "1000000422569561",
      "purchase_date": "2018-07-25 13:05:47 Etc/GMT",
      "purchase_date_ms": "1532523947000",
      "purchase_date_pst": "2018-07-25 06:05:47 America/Los_Angeles",
      "original_purchase_date": "2018-07-25 13:05:01 Etc/GMT",
      "original_purchase_date_ms": "1532523901000",
      "original_purchase_date_pst": "2018-07-25 06:05:01 America/Los_Angeles",
      "expires_date": "2018-07-25 14:05:47 Etc/GMT",
      "expires_date_ms": "1532527547000",
      "expires_date_pst": "2018-07-25 07:05:47 America/Los_Angeles",
      "web_order_line_item_id": "1000000039641613",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000423261830",
      "original_transaction_id": "1000000423261830",
      "purchase_date": "2018-07-27 00:46:25 Etc/GMT",
      "purchase_date_ms": "1532652385000",
      "purchase_date_pst": "2018-07-26 17:46:25 America/Los_Angeles",
      "original_purchase_date": "2018-07-27 00:46:26 Etc/GMT",
      "original_purchase_date_ms": "1532652386000",
      "original_purchase_date_pst": "2018-07-26 17:46:26 America/Los_Angeles",
      "expires_date": "2018-07-27 01:46:25 Etc/GMT",
      "expires_date_ms": "1532655985000",
      "expires_date_pst": "2018-07-26 18:46:25 America/Los_Angeles",
      "web_order_line_item_id": "1000000039642764",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000423269876",
      "original_transaction_id": "1000000423269876",
      "purchase_date": "2018-07-27 01:46:25 Etc/GMT",
      "purchase_date_ms": "1532655985000",
      "purchase_date_pst": "2018-07-26 18:46:25 America/Los_Angeles",
      "original_purchase_date": "2018-07-27 01:45:29 Etc/GMT",
      "original_purchase_date_ms": "1532655929000",
      "original_purchase_date_pst": "2018-07-26 18:45:29 America/Los_Angeles",
      "expires_date": "2018-07-27 02:46:25 Etc/GMT",
      "expires_date_ms": "1532659585000",
      "expires_date_pst": "2018-07-26 19:46:25 America/Los_Angeles",
      "web_order_line_item_id": "1000000039669246",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000423286456",
      "original_transaction_id": "1000000423286456",
      "purchase_date": "2018-07-27 02:46:25 Etc/GMT",
      "purchase_date_ms": "1532659585000",
      "purchase_date_pst": "2018-07-26 19:46:25 America/Los_Angeles",
      "original_purchase_date": "2018-07-27 02:45:35 Etc/GMT",
      "original_purchase_date_ms": "1532659535000",
      "original_purchase_date_pst": "2018-07-26 19:45:35 America/Los_Angeles",
      "expires_date": "2018-07-27 03:46:25 Etc/GMT",
      "expires_date_ms": "1532663185000",
      "expires_date_pst": "2018-07-26 20:46:25 America/Los_Angeles",
      "web_order_line_item_id": "1000000039669562",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000423304465",
      "original_transaction_id": "1000000423304465",
      "purchase_date": "2018-07-27 03:46:25 Etc/GMT",
      "purchase_date_ms": "1532663185000",
      "purchase_date_pst": "2018-07-26 20:46:25 America/Los_Angeles",
      "original_purchase_date": "2018-07-27 03:45:27 Etc/GMT",
      "original_purchase_date_ms": "1532663127000",
      "original_purchase_date_pst": "2018-07-26 20:45:27 America/Los_Angeles",
      "expires_date": "2018-07-27 04:46:25 Etc/GMT",
      "expires_date_ms": "1532666785000",
      "expires_date_pst": "2018-07-26 21:46:25 America/Los_Angeles",
      "web_order_line_item_id": "1000000039669996",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000423325875",
      "original_transaction_id": "1000000423325875",
      "purchase_date": "2018-07-27 04:46:25 Etc/GMT",
      "purchase_date_ms": "1532666785000",
      "purchase_date_pst": "2018-07-26 21:46:25 America/Los_Angeles",
      "original_purchase_date": "2018-07-27 04:45:30 Etc/GMT",
      "original_purchase_date_ms": "1532666730000",
      "original_purchase_date_pst": "2018-07-26 21:45:30 America/Los_Angeles",
      "expires_date": "2018-07-27 05:46:25 Etc/GMT",
      "expires_date_ms": "1532670385000",
      "expires_date_pst": "2018-07-26 22:46:25 America/Los_Angeles",
      "web_order_line_item_id": "1000000039670444",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285",
      "is_upgraded": "true"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.vip",
      "transaction_id": "1000000423345801",
      "original_transaction_id": "1000000423345801",
      "purchase_date": "2018-07-27 05:39:44 Etc/GMT",
      "purchase_date_ms": "1532669984000",
      "purchase_date_pst": "2018-07-26 22:39:44 America/Los_Angeles",
      "original_purchase_date": "2018-07-27 05:39:46 Etc/GMT",
      "original_purchase_date_ms": "1532669986000",
      "original_purchase_date_pst": "2018-07-26 22:39:46 America/Los_Angeles",
      "expires_date": "2018-07-27 06:39:44 Etc/GMT",
      "expires_date_ms": "1532673584000",
      "expires_date_pst": "2018-07-26 23:39:44 America/Los_Angeles",
      "web_order_line_item_id": "1000000039670911",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000423370426",
      "original_transaction_id": "1000000423370426",
      "purchase_date": "2018-07-27 06:59:17 Etc/GMT",
      "purchase_date_ms": "1532674757000",
      "purchase_date_pst": "2018-07-26 23:59:17 America/Los_Angeles",
      "original_purchase_date": "2018-07-27 06:59:18 Etc/GMT",
      "original_purchase_date_ms": "1532674758000",
      "original_purchase_date_pst": "2018-07-26 23:59:18 America/Los_Angeles",
      "expires_date": "2018-07-27 07:59:17 Etc/GMT",
      "expires_date_ms": "1532678357000",
      "expires_date_pst": "2018-07-27 00:59:17 America/Los_Angeles",
      "web_order_line_item_id": "1000000039671249",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285",
      "is_upgraded": "true"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.vip",
      "transaction_id": "1000000423370716",
      "original_transaction_id": "1000000423370716",
      "purchase_date": "2018-07-27 07:00:39 Etc/GMT",
      "purchase_date_ms": "1532674839000",
      "purchase_date_pst": "2018-07-27 00:00:39 America/Los_Angeles",
      "original_purchase_date": "2018-07-27 07:00:40 Etc/GMT",
      "original_purchase_date_ms": "1532674840000",
      "original_purchase_date_pst": "2018-07-27 00:00:40 America/Los_Angeles",
      "expires_date": "2018-07-27 08:00:39 Etc/GMT",
      "expires_date_ms": "1532678439000",
      "expires_date_pst": "2018-07-27 01:00:39 America/Los_Angeles",
      "web_order_line_item_id": "1000000039672196",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member",
      "transaction_id": "1000000423430088",
      "original_transaction_id": "1000000423430088",
      "purchase_date": "2018-07-27 08:33:01 Etc/GMT",
      "purchase_date_ms": "1532680381000",
      "purchase_date_pst": "2018-07-27 01:33:01 America/Los_Angeles",
      "original_purchase_date": "2018-07-27 08:33:02 Etc/GMT",
      "original_purchase_date_ms": "1532680382000",
      "original_purchase_date_pst": "2018-07-27 01:33:02 America/Los_Angeles",
      "expires_date": "2018-07-27 09:33:01 Etc/GMT",
      "expires_date_ms": "1532683981000",
      "expires_date_pst": "2018-07-27 02:33:01 America/Los_Angeles",
      "web_order_line_item_id": "1000000039672220",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
      "transaction_id": "1000000595911566",
      "original_transaction_id": "1000000595911566",
      "purchase_date": "2019-11-22 07:01:55 Etc/GMT",
      "purchase_date_ms": "1574406115000",
      "purchase_date_pst": "2019-11-21 23:01:55 America/Los_Angeles",
      "original_purchase_date": "2019-11-22 07:01:56 Etc/GMT",
      "original_purchase_date_ms": "1574406116000",
      "original_purchase_date_pst": "2019-11-21 23:01:56 America/Los_Angeles",
      "expires_date": "2019-11-22 07:06:55 Etc/GMT",
      "expires_date_ms": "1574406415000",
      "expires_date_pst": "2019-11-21 23:06:55 America/Los_Angeles",
      "web_order_line_item_id": "1000000039673774",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
      "transaction_id": "1000000595914852",
      "original_transaction_id": "1000000595914852",
      "purchase_date": "2019-11-22 07:06:55 Etc/GMT",
      "purchase_date_ms": "1574406415000",
      "purchase_date_pst": "2019-11-21 23:06:55 America/Los_Angeles",
      "original_purchase_date": "2019-11-22 07:06:21 Etc/GMT",
      "original_purchase_date_ms": "1574406381000",
      "original_purchase_date_pst": "2019-11-21 23:06:21 America/Los_Angeles",
      "expires_date": "2019-11-22 07:11:55 Etc/GMT",
      "expires_date_ms": "1574406715000",
      "expires_date_pst": "2019-11-21 23:11:55 America/Los_Angeles",
      "web_order_line_item_id": "1000000048450343",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
      "transaction_id": "1000000595917594",
      "original_transaction_id": "1000000595917594",
      "purchase_date": "2019-11-22 07:11:55 Etc/GMT",
      "purchase_date_ms": "1574406715000",
      "purchase_date_pst": "2019-11-21 23:11:55 America/Los_Angeles",
      "original_purchase_date": "2019-11-22 07:11:26 Etc/GMT",
      "original_purchase_date_ms": "1574406686000",
      "original_purchase_date_pst": "2019-11-21 23:11:26 America/Los_Angeles",
      "expires_date": "2019-11-22 07:16:55 Etc/GMT",
      "expires_date_ms": "1574407015000",
      "expires_date_pst": "2019-11-21 23:16:55 America/Los_Angeles",
      "web_order_line_item_id": "1000000048450495",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
      "transaction_id": "1000000595920159",
      "original_transaction_id": "1000000595920159",
      "purchase_date": "2019-11-22 07:16:55 Etc/GMT",
      "purchase_date_ms": "1574407015000",
      "purchase_date_pst": "2019-11-21 23:16:55 America/Los_Angeles",
      "original_purchase_date": "2019-11-22 07:15:56 Etc/GMT",
      "original_purchase_date_ms": "1574406956000",
      "original_purchase_date_pst": "2019-11-21 23:15:56 America/Los_Angeles",
      "expires_date": "2019-11-22 07:21:55 Etc/GMT",
      "expires_date_ms": "1574407315000",
      "expires_date_pst": "2019-11-21 23:21:55 America/Los_Angeles",
      "web_order_line_item_id": "1000000048450647",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
      "transaction_id": "1000000595923656",
      "original_transaction_id": "1000000595923656",
      "purchase_date": "2019-11-22 07:21:55 Etc/GMT",
      "purchase_date_ms": "1574407315000",
      "purchase_date_pst": "2019-11-21 23:21:55 America/Los_Angeles",
      "original_purchase_date": "2019-11-22 07:21:13 Etc/GMT",
      "original_purchase_date_ms": "1574407273000",
      "original_purchase_date_pst": "2019-11-21 23:21:13 America/Los_Angeles",
      "expires_date": "2019-11-22 07:26:55 Etc/GMT",
      "expires_date_ms": "1574407615000",
      "expires_date_pst": "2019-11-21 23:26:55 America/Los_Angeles",
      "web_order_line_item_id": "1000000048450768",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
      "transaction_id": "1000000595926312",
      "original_transaction_id": "1000000595926312",
      "purchase_date": "2019-11-22 07:26:55 Etc/GMT",
      "purchase_date_ms": "1574407615000",
      "purchase_date_pst": "2019-11-21 23:26:55 America/Los_Angeles",
      "original_purchase_date": "2019-11-22 07:26:07 Etc/GMT",
      "original_purchase_date_ms": "1574407567000",
      "original_purchase_date_pst": "2019-11-21 23:26:07 America/Los_Angeles",
      "expires_date": "2019-11-22 07:31:55 Etc/GMT",
      "expires_date_ms": "1574407915000",
      "expires_date_pst": "2019-11-21 23:31:55 America/Los_Angeles",
      "web_order_line_item_id": "1000000048450931",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    },
    {
      "quantity": "1",
      "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
      "transaction_id": "1000000595951896",
      "original_transaction_id": "1000000595951896",
      "purchase_date": "2019-11-22 08:11:38 Etc/GMT",
      "purchase_date_ms": "1574410298000",
      "purchase_date_pst": "2019-11-22 00:11:38 America/Los_Angeles",
      "original_purchase_date": "2019-11-22 08:11:39 Etc/GMT",
      "original_purchase_date_ms": "1574410299000",
      "original_purchase_date_pst": "2019-11-22 00:11:39 America/Los_Angeles",
      "expires_date": "2019-11-22 08:16:38 Etc/GMT",
      "expires_date_ms": "1574410598000",
      "expires_date_pst": "2019-11-22 00:16:38 America/Los_Angeles",
      "web_order_line_item_id": "1000000048451078",
      "is_trial_period": "false",
      "is_in_intro_offer_period": "false",
      "subscription_group_identifier": "20423285"
    }
  ],
  "pending_renewal_info": [
    {
      "expiration_intent": "1",
      "auto_renew_product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
      "original_transaction_id": "1000000595951896",
      "is_in_billing_retry_period": "0",
      "product_id": "com.ft.ftchinese.mobile.subscription.member.monthly",
      "auto_renew_status": "0"
    }
  ]
}`

func getReceiptResponse() VerificationResp {
	var v VerificationResp
	if err := json.Unmarshal([]byte(mockReceiptResponse), &v); err != nil {
		panic(err)
	}

	return v
}

func TestVerificationResponseBody_Unmarshal(t *testing.T) {
	var r VerificationResp

	if err := json.Unmarshal([]byte(mockReceiptResponse), &r); err != nil {
		t.Error(err)
	}

	t.Logf("Response: %+v", r)
}

func TestVerificationResponseBody_SortLatestReceipts(t *testing.T) {
	receipts := []Transaction{
		{
			ExpiresDateMs: "1574407915000",
		},
		{
			ExpiresDateMs: "1574410598000",
		},
	}

	sort.SliceStable(receipts, func(i, j int) bool {
		return receipts[i].ExpiresDateMs < receipts[j].ExpiresDateMs
	})

	t.Logf("Ascending: %+v", receipts)

	sort.SliceStable(receipts, func(i, j int) bool {
		return receipts[i].ExpiresDateMs > receipts[j].ExpiresDateMs
	})

	t.Logf("Descending: %+v", receipts)
}

func TestVerificationResponseBody_Validate(t *testing.T) {
	resp := getReceiptResponse()

	isValid := resp.Validate()

	t.Logf("Is valid: %t", isValid)
}

func TestVerificationResponseBody_Subscription(t *testing.T) {
	resp := getReceiptResponse()
	resp.sortLatestReceiptsDesc()

	sub, err := resp.Subscription()
	if err != nil {
		t.Error(err)
	}
	t.Logf("Subscription: %+v", sub)
}
